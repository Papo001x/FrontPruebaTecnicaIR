<section>
  <div class="user-info-container">
    <h2>Panel de Usuario</h2>
    <p>Nombre: {{ userInfo.name }} {{ userInfo.lastName }}</p>
    <div>
      @if (hideInformation) {
      <p>Correo: {{ userInfo.email }}</p>
      }
      <p>Rol: {{ userInfo.roleName }}</p>
      @if (userInfo.programId) {
      <p>Programa: {{ userInfo.programName }}</p>
      }
    </div>
  </div>

  <div>
    <h3>Listado de materias registradas</h3>
    <div class="mat-elevation-z8" style="width: 80%">
      <table
        mat-table
        [dataSource]="subjectList.programSubjectDetail"
        matSort
        class="full-width-table"
      >
        <ng-container matColumnDef="programSubjectId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
          <td mat-cell *matCellDef="let ps">{{ ps.programSubjectId }}</td>
        </ng-container>
        <ng-container matColumnDef="subjectName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Materia</th>
          <td mat-cell *matCellDef="let ps">{{ ps.subjectName }}</td>
        </ng-container>
        <ng-container matColumnDef="teacherName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Profesor</th>
          <td mat-cell *matCellDef="let ps">{{ ps.teacherName }}</td>
        </ng-container>
        <ng-container matColumnDef="credits">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Creditos</th>
          <td mat-cell *matCellDef="let ps">{{ ps.credits }}</td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Acciones</th>
          <td mat-cell *matCellDef="let ps">
            @if (hideInformation) {
            <button
              mat-icon-button
              color="warn"
              matTooltip="Eliminar"
              (click)="deleteUserProgramSubject(ps.id)"
            >
              <mat-icon>delete</mat-icon>
            </button>
            <button
              mat-icon-button
              color="warn"
              matTooltip="Ver listado de clase"
              (click)="viewClassList(ps.programSubjectId)"
            >
              <mat-icon>visibility</mat-icon>
            </button>
            }
          </td></ng-container
        >

        <tr mat-header-row *matHeaderRowDef="colums"></tr>
        <tr mat-row *matRowDef="let row; columns: colums"></tr>
      </table>
      <mat-paginator
        [pageSize]="10"
        [pageSizeOptions]="[5, 10, 20]"
      ></mat-paginator>
    </div>
  </div>

  @if (hideInformation) {
  <div class="form-container">
    <h3>Registrar materias</h3>
    <form [formGroup]="form" class="form-container">
      <mat-form-field class="full-width">
        <mat-label>Materia</mat-label>
        <mat-select formControlName="programSubjectId">
          <mat-option
            *ngFor="let subject of programsSubjects"
            [value]="subject.programSubjectId"
          >
            {{ subject.subjectName }} - {{ subject.credits }} cr√©ditos
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button
        mat-raised-button
        color="primary"
        (click)="createUserProgramSubject()"
        [disabled]="form.invalid"
      >
        Registrar Materia
      </button>
    </form>
  </div>
  }@else{
  <div class="form-container">
    <button mat-raised-button color="primary" (click)="returnToDashboard()">
      Atras
    </button>
  </div>
  }
</section>
